<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener - Dashboard</title>
    <link rel="stylesheet" href="/static/css/tacit-css.min.css">
    <script src="/static/js/htmx.min.js"></script>
</head>
<body>
    <header>
        <nav>
            <button onclick="logout()" style="float: right;">Log Out</button>
        </nav>
    </header>

    <main style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
        <section>
            <h2>Shorten a URL</h2>
            <form action="/shorten" method="POST">
                <div>
                    <label for="original-url">Enter URL to shorten:</label>
                    <input 
                        type="url" 
                        id="original-url" 
                        name="original_url" 
                        placeholder="https://example.com/very-long-url-path" 
                        required
                        style="width: 100%; margin: 0.5rem 0;"
                    >
                </div>
                <button type="submit">Shorten URL</button>
            </form>
        </section>

        <section style="margin-top: 2rem;">
            {{ if .urls }}
            <h2>Your shortened URLs</h2>
            <table style="border: 2px solid black; border-collapse: collapse;">
                <tr>
                    <th style="border: 1px solid black;">original</th>
                    <th>shortened</th>
                </tr>
                {{ range .urls }}
                    <tr>
                        {{ range . }}
                            <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; border: 1px solid black;">{{ . }}</th>
                        {{ end }}
                    </tr>
                {{ end }}
            </table>
            {{ else }}
            <h2>No shortened URLs yet</h2>
            {{ end }}
        </section>
    </main>
    <script>
        function logout() {
            localStorage.removeItem('auth_token');
            window.location.href = '/';
        }
    </script>
</body>
</html>
